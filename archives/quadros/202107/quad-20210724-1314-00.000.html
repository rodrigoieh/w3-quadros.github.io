<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="../../resources/js/quadros.style.js"></script>
    <script src="../../resources/js/quadros.commons.js"></script>
    <script src="../../resources/js/quadros.table.js"></script>
    <link rel="stylesheet" href="../../resources/css/quadros.css"/>
    <title>rotation</title>
</head>
<style>
    :root {
        --a: #8e9070;
        --b: #585b3d;
        --c: #8e9070;
        --d: #585b3d;
        --rotation: var(--b);
    }

    body {
        background: linear-gradient(to left, var(--c), var(--d));
    }

    #demo {
    }

    #wrapper {
        border: 3px var(--c) solid;
    }

    table {
        border-radius: 50%;
        background: linear-gradient(var(--rotation), var(--a), var(--b));
    }

    td.cell_style {
        border: 1px white solid;
        background-color: transparent;
    }

</style>
<body>
<script>
    const vars = {"a": 'var(--a)', "b": 'var(--b)'};
    const palette = [
        {"a": `#8e9070`, "b": `#585b3d`},
        {"a": `#000000`, "b": `#282828`}
    ];

    const cellStyle = 'cell_style';
    setCellContentOverride = (td, i, j, y, x) => {
        if (i + 1 === Math.floor(y / 2)) td.style.borderBottom = '1px red solid';
        td.className = `td ${cellStyle}`;
    }
    main(8, 8)

    let root = document.documentElement;
    let wrapper = document.createElement('div');
    let table = document.getElementById('table');
    let demo = document.getElementById('demo');
    wrapper.id = 'wrapper';
    wrapper.appendChild(table);
    demo.appendChild(wrapper);

    let i = 0, j = -1;
    let toggle = true;
    const limit = 720;
    const speed = 60;
    const f = 0.5;

    function loop() {
        setTimeout(() => {
            console.debug(i);
            table.style.transform = `rotate(${i * j}deg)`;
            if (++i < limit) loop();
        }, (toggle) ? speed : speed + i * f)
    }

    table.addEventListener('click', () => {
        let p = 0;
        j = -1;
        if (toggle) i = 0, j *= -1, p = 1;
        root.style.setProperty('--a', palette[p].a);
        root.style.setProperty('--b', palette[p].b);
        root.style.setProperty('--rotation', palette[p].b);
        toggle = !toggle;
    });

    loop();
</script>
</body>
</html>
